<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Internal Implementation | Kinstrife </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Internal Implementation | Kinstrife ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../articles/packages/toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://kinstrife.visualstudio.com/Core/_git/Core?path=Packages/Audio/Documentation/internals.md&amp;version=GBmaster&amp;line=1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="internal-implementation">Internal Implementation</h1>

<p>This is not relevant if you only plan to use this package. This is mostly meant for the sake of posteriority, for when changes will need to be made to the system.</p>
<h2 id="sound--soundcategory">Sound &amp; SoundCategory</h2>
<p>These are meant as data holding/authoring objects, referenced in config and database data. Sounds contain multiple <code>SoundVariation</code> instances; both can generate a <code>PlayableClip</code> which can be used to pass to a <code>SoundPlayer</code> to play.
The sound class contains a small in-editor audio system to test/audition sounds and their variations, including random as well as min/max pitch and volume.</p>
<p>In the future we might also utilize sound categories to implement sound-grouping logic.</p>
<h2 id="soundsettings">SoundSettings</h2>
<p>Sound settings contain spatial and configuration data, based on the available settings of the audio source. Settings are split up between sound categories and individual sounds, with a combined SoundSetting struct to combine both data 'halves' again. This combined struct can be applied to AudioSource instances.</p>
<h2 id="soundinstance">SoundInstance</h2>
<p><a href="xref:Kinstrife.Audio.SoundInstance"><code>SoundInstance</code></a>s are, well, just that, and also audio source instances. They create dummy game objects with audio sources (which are hidden in the hierarchy and don't get saved), which will reside in the scene specified in the <code>SoundSystem</code>. They hide away the interaction with the engine's audio API from the rest of the package.</p>
<h2 id="soundsystem">SoundSystem</h2>
<p><a href="xref:Kinstrife.Audio.SoundSystem"><code>SoundSystem</code></a> is the access point for the public API. It is</p>
<ol>
<li>a wrapper around the internal <code>SoundPlayer</code></li>
<li>handles pooling of SoundPlayers and</li>
<li>manages their IDs.</li>
</ol>
<p>To this end, it contains a pool class for SoundPlayers and a dictionary of ID/SoundPlayer key-value-pairs.
GameObjects are used as IDs because this allows for a sort of 'fire and forget' approach to looped sounds,
similar to how an AudioSource would work if it was attached to that game object. Additionally, GameObjects already exist (sorta) as a unique identifier for objects in a scene - might as well reuse that instead of generating and handing out new unique IDs (which would be the alternative).</p>
<p>TODO for the future: Expand with localization in mind (probably by reducing Sound to an ISound interface, allowing for a new LocalizedSound type to also provide a PlayableClip)</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://kinstrife.visualstudio.com/Core/_git/Core?path=Packages/Audio/Documentation/internals.md&amp;version=GBmaster&amp;line=1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
